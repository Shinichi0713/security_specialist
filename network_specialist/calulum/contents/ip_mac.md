IPパケットとMACフレームの関係は、一言で言うと **「中身（手紙）」と「封筒（パッケージ）」** の関係です。

ネットワーク通信では、データが階層を移動するごとに新しい情報で包まれる **「カプセル化」** というプロセスが行われます。


### 1. 役割の違い：誰がどこへ届けるか？

* **IPパケット（第3層：ネットワーク層）**
* **役割:** 最終目的地（エンド・ツー・エンド）までの配達。
* **住所:** IPアドレス（例：192.168.1.1）。
* **イメージ:** 手紙の便箋に書かれた「東京都◯◯様」という**最終的な宛先**。


* **MACフレーム（第2層：データリンク層）**
* **役割:** 隣り合う機器（ホップ・バイ・ホップ）への配達。
* **住所:** MACアドレス（例：00:1A:2B...）。
* **イメージ:** 郵便局の間で使われる **「次の配送拠点」が書かれたカゴや袋** 。



### 2. 構造の関係性（カプセル化）

データが送信されるとき、IPパケットはMACフレームの中に「荷物（ペイロード）」として丸ごと詰め込まれます。

1. **IPパケットの作成:** データの前に「宛先IP」などの**IPヘッダ**がつきます。
2. **MACフレームへの格納:** そのIPパケットを包むように、さらに外側へ「宛先MACアドレス」などの**MACヘッダ**と、エラー検知用の**FCS（トレーラ）**がつきます。

イーサネットの場合、この完成形が「イーサネットフレーム（MACフレーム）」として物理的なケーブルへ送り出されます。


### 3. 通信中の変化：書き換わるか、変わらないか

ここが最も面白いポイントです。通信が進むにつれて、この2つには大きな違いが出ます。

* **IPパケットは「変わらない」:**
送信元から受信先に届くまで、IPヘッダに書かれた宛先IPアドレスは基本的に書き換わりません（NATなどを除く）。
* **MACフレームは「次々に書き換わる」:**
ルーターを通過するたびに、MACフレームは一度壊され、新しい「次の隣の機器」を宛先にしたMACフレームに作り直されます。


### 4. まとめ：なぜ両方必要なのか？

* **IPパケットだけでは:** 物理的なケーブル上をどう流れるか、隣のルーターのどのアシ（ポート）に届けるべきかが分かりません。
* **MACフレームだけでは:** 世界中のネットワークをまたいで、最終的にどのPCに届けるべきかのルート案内ができません。

この2つが**「二重構造」**になっているおかげで、インターネットという巨大な網目の中でも、迷子にならずにデータが届くのです。


### まとめ表

| 比較項目 | IPパケット | MACフレーム |
| --- | --- | --- |
| **OSI参照モデル** | 第3層（ネットワーク層） | 第2層（データリンク層） |
| **主な識別子** | IPアドレス（論理住所） | MACアドレス（物理住所） |
| **有効範囲** | インターネット全体（最終目的地まで） | 隣り合う機器間（1ホップ） |
| **変化** | 原則として最後まで不変 | ルーターを越えるたびに書き換わる |




