PPPoE（PPP over Ethernet）は、その名の通り **「イーサネット（LAN）という土台の上で、PPPというルールを動かすための技術」** です。

PPPが本来「1対1の専用線（電話線など）」を想定していたのに対し、それを「不特定多数が繋がるイーサネット」でも使えるように拡張したものと言い換えられます。

### 1. PPPとPPPoEの関係（カプセル化）

関係性を一言で表すと、 **「PPPという荷物を、イーサネットという一回り大きな箱（フレーム）に詰め込んだもの」** です。これをネットワーク用語で「カプセル化」と呼びます。

* **PPP:** ユーザー認証（ID/パスワード）を行い、IPアドレスを割り当てる役割。
* **イーサネット:** 物理的なLANケーブルを通じてデータを運ぶ役割。
* **PPPoE:** この2つを結びつける「接着剤」の役割。


### 2. なぜPPPoEが必要だったのか？

インターネットがADSLや光回線に移行したとき、接続形態が大きく変わりました。

* **昔の電話回線:** 物理的に1対1で繋がっているため、繋がった相手＝プロバイダでした。
* **現代のイーサネット（光回線）:** ハブやスイッチを介して、1つの網に多くの人が繋がります。

イーサネットには「認証（パスワード確認）」の仕組みがありません。そこで、 **「イーサネットの便利さ（高速・安価）」** を活かしつつ、 **「PPPの管理機能（誰が接続しているか確認する）」** をそのまま使い回すためにPPPoEが開発されました。

### 3. PPPoEの役割

PPPoEの役割をざくっと一言で言うと、 **「イーサネット（LANケーブル）を使って、プロバイダに『会員証（ID・パスワード）』を提示して、インターネットの入り口を開けてもらう仕組み」** です。

もう少しイメージしやすく、3つのポイントで整理します。

#### 「誰が繋いでいるか」を確認する（認証）

イーサネット（LAN）自体には、実は「パスワードでログインする」という仕組みがありません。
そこで、昔の電話回線で使われていた **PPP（会員確認が得意なルール）** を、 **イーサネット（現代のLANのルール）** の中に潜り込ませました。これにより、プロバイダは「この人は契約者のAさんだ」と確認して、通信を許可できるようになります。

#### 「専用のトンネル」を作る（カプセル化）

PPPoEは、あなたのルーターからプロバイダの設備まで、 **仮想的な「専用の土管（トンネル）」** を通します。
あなたのデータはこの土管の中にパッキング（カプセル化）されて運ばれるため、他のユーザーのデータと混ざることなく、安全にプロバイダまで届きます。

#### 「ネット上の住所」を割り当てる（IPアドレス配布）

「会員証」の確認が取れると、プロバイダはあなたのルーターに対して「今回の通信では、このIPアドレスを使ってね」と、インターネット上の住所を1つ貸し出してくれます。これでようやく外の世界と通信できるようになります。


#### 例えるなら…「有料道路の料金所」

* **イーサネット（LAN）**: 一般道です。誰でも走れますが、それだけでは目的地（プロバイダの先）へは行けません。
* **PPPoE**: 高速道路の **「ETCカード（ID/パスワード）を使ったゲート」** です。
* ゲートで会員確認を行い、OKなら専用の高速道路（トンネル）に入れます。
* そこで「通行手形（IPアドレス）」をもらって、初めて遠くの街（インターネット）へ行けるようになります。



### 4. PPPoEの通信レイヤー（階層）

OSI参照モデルで比較すると、PPPoEがどこに位置しているか分かります。

| 層 | PPP (電話線時代) | **PPPoE (光/ADSL時代)** |
| --- | --- | --- |
| **第3層 (ネットワーク層)** | IP | IP |
| **第2層 (データリンク層)** | **PPP** | **PPP** / **PPPoE** / Ethernet |
| **第1層 (物理層)** | 電話線 (アナログ信号) | LANケーブル / 光ファイバー |


### 5. PPPoEのメリットとデメリット

| メリット | デメリット |
| --- | --- |
| **既存の仕組みが使える:** プロバイダ側がダイヤルアップ時代の認証システムをそのまま流用できた。 | **オーバーヘッド:** ヘッダが重なるため、一度に送れるデータ量（MTU）が減る（1500 → 1492バイト）。 |
| **接続管理が容易:** ユーザーごとに接続・切断を制御し、課金管理ができる。 | **混雑しやすい:** 網終端装置（NTE）というゲートを通る必要があり、夜間などに速度低下が起きやすい。 |


### まとめ

PPPoEとは、 **「本来は電話用だったPPPというルールを、現代のLAN（イーサネット）でも使えるように翻訳・梱包する技術」** です。

私たちが光回線のルーターにIDとパスワードを設定しているのは、まさにこの「PPPoEという箱」を作ってプロバイダに届けるためなのです。

## IPoE

先程の通りPPPoEには混雑しやすいというデメリットがありました。
PPPoEの混雑を解消するために登場したのが **IPoE（IP over Ethernet）** です。
これまでの「PPPoE方式」が **「細くて混むトンネルを通る道」** だとすれば、IPoE方式は **「広くてゲートのないバイパス道路」** のようなものです。

その違いの核心を解説します。


### 1. なぜPPPoEは「混む」のか？

PPPoEが遅くなる最大の原因は、通信経路にある **「網終端装置（NTE）」** というゲート（関所）にあります。

* **認証の手間:** ユーザーが接続するたびにID/パスワードの確認が必要で、ここで処理待ちが発生します。
* **物理的な限界:** NTTの設備にあるこのゲートは、通信量に応じて設置台数が決まっており、夜間など利用者が集中すると「入り口が大渋滞」してしまいます。


### 2. IPoE（IPv6）はなぜ「速い」のか？

IPoEは、イーサネット（LAN）の仕組みをそのままインターネット側に延長したような接続方式です。

* **ゲート（関所）を通らない:** PPPoEで渋滞の原因だった「網終端装置」を通らず、 **「GWR（ゲートウェイルーター）」** という非常に大容量な設備を直接通ります。
* **認証がいらない:** 回線ごとに契約情報が紐付いているため、ルーターにIDやパスワードを設定する必要がありません。繋ぐだけで通信が始まります。
* **次世代の道路:** そもそもIPv6という新しい広大な住所体系（プロトコル）に合わせて設計されているため、非常にスムーズです。


### 3. IPoEの注意点：「IPv4」はどうなる？

IPoEは本来「IPv6専用」の道路です。しかし、世の中の多くのWebサイト（Google、YouTube、Netflix以外の一部サイトなど）は、まだ古い「IPv4」で動いています。

そこで登場したのが、 **「IPv4 over IPv6（カプセル化）」** という技術です。

* **仕組み:** IPv4のデータを、IPv6という大きなカプセルに包んで、IPoEの高速道路を走らせます。
* **効果:** これにより、 **「古いIPv4サイトを見る時も、PPPoEの渋滞に巻き込まれずに済む」** ようになります。


### 4. PPPoE vs IPoE 比較まとめ

| 比較項目 | PPPoE (従来型) | IPoE (次世代型) |
| --- | --- | --- |
| **接続方式** | トンネル接続 (PPP) | ネイティブ接続 (Ethernet) |
| **認証** | ID・パスワードが必要 | 不要 (回線判別) |
| **渋滞ポイント** | **網終端装置 (NTE)** | なし (大容量ルーターを通る) |
| **速度** | 夜間などに低下しやすい | 安定して高速 |
| **設定** | ルーターへの入力が必要 | 繋ぐだけで自動設定 |


### まとめ

IPoE（IPv6）は、 **「認証という手続きをなくし、渋滞の原因となる古い設備をバイパスすることで、光回線本来のポテンシャルを引き出す技術」** です。

現在の「10ギガ光回線」などのサービスは、このIPoE方式を前提として提供されています。


