## プロトコルと標準化

プロトコルをつくる主体は従来はベンダ。独自プロトコルを数多く制定した。
他のベンダの通信機器と通信できなかった。

ところが、ネットワークシステムが普及すると相互接続性が重要となった。
→相互接続するための標準化を行う機関が生じた。

- IETF: RFCなる規格文章を発行する
- RFC: IETFが発行する規格文章のこと
- ISO: 国際標準規格
- ITU: 国際電気通信規格
- NIST: 米国標準技術局。

## コネクション VS コネクションレス

通信における「コネクション型」と「コネクションレス型」の違いは、よく**「電話」と「手紙（はがき）」**に例えられます。

相手とつながっていることを確認してから会話を始めるのか、それともいきなりデータを送りつけるのか、という点が根本的な違いです。

### 1. コネクション型通信（電話のような通信）

データを送る前に、まず送信者と受信者の間で「これから送りますよ」「いいですよ」という合意（コネクション）を確立する方式です。

* **代表的なプロトコル:** **TCP** (Transmission Control Protocol)
* **仕組み:**
1. **接続（ハンドシェイク）:** 相手が通信可能か確認し、専用の通り道を確保する。
2. **データ送信:** データを送る。
3. **確認応答:** 届くたびに「届きました」という返事をもらう。届かなければ再送する。
4. **切断:** 終わったら通り道を閉じる。


* **メリット:** 信頼性が非常に高い。データの欠落や順番の入れ替わりを防げる。
* **デメリット:** 確認作業が多いため、通信のオーバーヘッド（無駄）が大きく、速度は少し遅くなる。


### 2. コネクションレス型通信（手紙のような通信）

相手の状態を確認せず、いきなりデータを送り出す方式です。

* **代表的なプロトコル:** **UDP** (User Datagram Protocol), **IP** (Internet Protocol)
* **仕組み:**
1. 相手の住所（IPアドレス）に向けて、データをパケットにして投げる。
2. 相手が受け取ったかどうかは気にしない。


* **メリット:** 確認作業がないため非常に高速で、リアルタイム性に優れる。
* **デメリット:** 途中でデータが消えても気づかない（信頼性が低い）。


### 比較まとめ表

| 項目 | コネクション型 (TCP) | コネクションレス型 (UDP) |
| --- | --- | --- |
| **例え** | **電話** | **手紙・はがき** |
| **信頼性** | 高い（届かなければ再送する） | 低い（送りっぱなし） |
| **速度** | 遅め（確認の手間がある） | 速い（すぐ送れる） |
| **主な用途** | Web閲覧、メール、ファイル転送 | 動画ストリーミング、オンラインゲーム、IP電話 |


### なぜ使い分けるのか？

例えば、**メール（TCP）**で文字が数文字消えてしまったら意味が通じなくなります。そのため、遅くても確実な「コネクション型」が必要です。

一方で、**YouTube（UDP）**などの動画配信では、一瞬データが消えて画像が乱れることよりも、映像が止まらずにスムーズに流れ続けること（速さ）が重要です。そのため、多少のミスには目をつむる「コネクションレス型」が適しています。

先ほど作成したRustのスクレイピングコードでは、HTTP通信（TCPベース）を使っているため、確実にPDFデータを取得できるようになっています。

## パケット
パケット（Packet）とは、ネットワークでデータをやり取りする際に、大きなデータを扱いやすいように細かく分割した **「小包」** のような単位のことです。

1. パケットの仕組み：なぜ分割するのか？

例えば、大きな画像ファイルをそのまま一つの塊として送ろうとすると、通信回線を長時間占有してしまいます。もし途中でエラーが起きれば、最初からすべて送り直さなければなりません。

データをパケットに分けることで、以下のメリットが生まれます。

回線の共有: 複数のユーザーが同じ回線を同時に使える（細切れのデータが隙間に入り込めるため）。

効率的な再送: 壊れたパケットだけを送り直せば済む。

柔軟な経路選択: ネットワークの混雑状況に合わせて、パケットごとに別々の道を通って目的地へ向かうことができる。

2. パケットの中身

パケットには、実際のデータだけでなく、送り届けるために必要な情報が付加されています。これをヘッダと呼びます。

ヘッダ: 送信元・送信先の住所（IPアドレス）、パケットの番号（組み立てる順番）、エラーチェック用のコードなど。

ペイロード: 分割された実際のデータ本体。

