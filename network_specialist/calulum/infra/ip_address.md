IPアドレス（IPv4）は、そのネットワークの規模や性質に応じて、伝統的に **「クラス（Class）」** という概念で5つのグループに分類されてきました。

現在では「クラスレス（CIDR）」というより柔軟な運用が主流ですが、IPアドレスの基礎知識としてクラス分けの用途を理解しておくことは非常に重要です。


### クラスA〜Dの用途一覧

| クラス | ネットワークの規模 | 主な用途 | 識別用ビット | アドレス範囲（第1オクテット） |
| --- | --- | --- | --- | --- |
| **クラスA** | 超大規模 | 国家レベル、巨大なプロバイダ | `0`... | 0 〜 127 |
| **クラスB** | 中・大規模 | 大学、大企業、自治体 | `10`... | 128 〜 191 |
| **クラスC** | 小規模 | 一般家庭、中小企業 | `110`... | 192 〜 223 |
| **クラスD** | ─ | **マルチキャスト**用 | `1110`... | 224 〜 239 |


### 各クラスの具体的な特徴

#### クラスA：超マンモス級ネットワーク

* **用途:** 歴史的に、IBMやApple、MIT（マサチューセッツ工科大学）などの巨大組織や、国防総省などに割り振られました。
* **特徴:** 1つのネットワーク内に約**1,677万台**もの機器を接続できます。
* **注意:** `127` で始まるアドレス（127.0.0.1など）は「ループバックアドレス（自分自身を指す）」として予約されているため、実質的には126個のネットワークしか存在しません。

#### クラスB：大規模組織向け

* **用途:** 大企業の社内LANや、大規模な大学キャンパスなどで使われます。
* **特徴:** 1つのネットワーク内に約**6.5万台**の機器を接続できます。

#### クラスC：身近なネットワーク

* **用途:** 私たちの自宅のWi-Fiルーターや、小規模なオフィスで最もよく見かけるクラスです。
* **特徴:** 1つのネットワーク内には**254台**までしか接続できませんが、その分、ネットワークの数自体は大量に作ることができます。
* **例:** よく見る `192.168.x.x` は、このクラスCの「プライベートIPアドレス」です。

#### クラスD：特殊な「1対多」通信

* **用途:** **マルチキャスト**専用です。特定の1台ではなく、そのグループに参加している複数の端末へ同時にデータを送る際に使われます。
* **例:** ネットワーク上のルーター同士が情報を交換（OSPFなどのルーティングプロトコル）したり、動画配信を複数の端末へ一斉に流したりする際に利用されます。


### （参考）クラスE

* **用途:** **研究・実験用**として予約されています。一般のインターネットや企業内LANで使われることはありません。
* **アドレス範囲:** 240 〜 255


### なぜ「クラス」という考え方が古くなったのか？

以前は「この会社は中規模だからクラスBを1つあげるね」といった配り方をしていました。しかし、これでは **「6.5万台も使わないのに、クラスBをもらうとアドレスが余って勿体ない」** という無駄（IPアドレス枯渇問題）が深刻化しました。

そこで現在は、クラスの枠組みを無視して、必要な分だけ細かく区切る **CIDR（サイダー / Classless Inter-Domain Routing）** という技術が使われています。

### まとめ

* **クラスA〜C**は、組織の大きさに合わせた「1対1」の通信用（ユニキャスト）。
* **クラスD**は、グループへの一斉送信用（マルチキャスト）。
* 現在はクラスにとらわれない「CIDR」が主流。

## キャスト

ネットワーク通信において、データが「誰から誰へ」届けられるのかという **通信方式（ルーティング方式）** の違いを表します。

これらは、宛先となる端末の数や、その選び方によって区別されます。


### 1. ユニキャスト (Unicast)

**「1対1」の通信方式です。**

* **意味:** 特定の1台の送信者が、特定の1台の受信者に対してデータを送ります。
* **例:** Webサイトの閲覧、メールの送信、1対1のビデオ通話など。
* **イメージ:** 郵便や電話のように、特定の住所や電話番号を指定してやり取りする最も一般的な通信です。


### 2. マルチキャスト (Multicast)

**「1対多（特定のグループ）」の通信方式です。**

* **意味:** 1台の送信者が、特定の「グループ」に参加している複数の受信者に対して、データを**1回だけ**送出します。
* **仕組み:** 途中のルーターがパケットを複製して各受信者に届けるため、送信者の負荷やネットワークの帯域消費を抑えられます。
* **例:** YouTube Liveなどのライブストリーミング（多人数への配信）、株価情報のリアルタイム配信、OSPFなどのルーター間情報の共有。
* **イメージ:** 興味がある人だけが登録している「メルマガ」や「放送」のようなものです。


### 3. エニーキャスト (Anycast)

**「1対1（グループの中の、誰か一番近い1台）」の通信方式です。**

* **意味:** 複数のサーバーが同じIPアドレスを持ち、送信者は**「その中でネットワーク的に最も近い1台」**と通信します。
* **仕組み:** もし1台のサーバーがダウンしても、自動的に次に近いサーバーにルートが切り替わるため、非常に高い可用性と分散性が得られます。
* **例:** **DNSサーバー（Googleの8.8.8.8など）**、CDN（コンテンツ配信ネットワーク）、IPv6のゲートウェイ探索。
* **イメージ:** 「一番近くのコンビニに行く」ようなものです。どの店舗でも同じサービスを受けられますが、あなたは一番近い店に向かいます。


### （参考）ブロードキャスト (Broadcast)

これらと並んでよく使われるのが「ブロードキャスト」です。

* **意味:** **「1対全員」**。同じネットワーク内にいるすべての端末に強制的にデータを送ります。
* **例:** ARP（MACアドレスを探す）、DHCP（IPアドレスをリクエストする）。
* **補足:** IPv6では効率の悪さから廃止され、マルチキャストに統合されました。


### 通信方式の比較まとめ

| 方式 | 宛先数 | 特徴 | 主な用途 |
| --- | --- | --- | --- |
| **ユニキャスト** | 1台 | 個別のやり取り | Web, メール |
| **マルチキャスト** | 特定グループ | 効率的な一斉配信 | ライブ配信, IPTV |
| **エニーキャスト** | 最寄りの1台 | 分散・高速・高可用 | DNS, CDN |
| **ブロードキャスト** | 全員 | 全員強制（L2/L3） | ARP, DHCP |


### まとめ

* **ユニキャスト**は「特定の相手」へ。
* **マルチキャスト**は「特定のグループ」へ。
* **エニーキャスト**は「同じ役割の誰か（一番近い人）」へ。

現代のインターネットを支える技術（特に高速な動画視聴や安定したDNS）には、このマルチキャストやエニーキャストの仕組みが欠かせません。

**次は、エニーキャストがどのようにして「一番近いサーバー」を判断しているのか、その裏側で動く「BGP」などの経路制御の仕組みについてお話ししましょうか？**


### 特殊なIPアドレス

0.0.0.0 = IPアドレスがまだ配布されていない時点で、IPアドレスを送信するときに使用する。
127.0.01 = ループバックアドレス。TCP/IPの通信ソフトが自分自身に対して設定したIPアドレスが正しいかを確認するために利用する。
255.255.255.255 = ブロードキャストアドレス。通信相手のIPアドレスが分からない場合に利用する。

### VLSM

VLSM（Variable Length Subnet Masking：可変長サブネットマスク）とは、一言で言えば **「1つのネットワークアドレスを、必要な大きさに合わせて自由なサイズで切り分ける技術」** です。

以前お話しした「クラス」による固定的な区切り（クラスAは/8、クラスBは/16など）の無駄を省き、IPアドレスを効率よく利用するために不可欠な技術です。


#### 1. VLSMのイメージ：ピザの切り分け

VLSMを理解するには、ピザの切り分けに例えると分かりやすいです。

* **従来のクラス分け:** どんなにお腹が空いていても、いなくても、必ず「4等分」や「8等分」という**同じサイズ**でしか切れませんでした。これでは1人しかいない時に頼むと、残りのピースが余って（IPアドレスの無駄）しまいます。
* **VLSM:** 食べる人数（ホスト数）に合わせて、「ここは大きく半分」「ここは小さく8分の1」というように、**バラバラのサイズ**で切り分けることができます。

#### 2. なぜVLSMが必要なのか？

例えば、ある企業に以下のような3つの拠点があるとします。

1. **本社：** 100台のPCがある
2. **支店：** 20台のPCがある
3. **ルータ間：** 2台のルータを繋ぐだけ（必要なIPは2つだけ）

これを従来の固定長サブネット（例えばクラスCを/26で4分割）で分けると、ルータ間の通信に「64個分のアドレス」を割り当てることになり、62個のアドレスが無駄になってしまいます。

**VLSMを使えば：**

* 本社には **/25**（128個分）
* 支店には **/27**（32個分）
* ルータ間には **/30**（4個分）
というように、無駄を最小限に抑えて割り当てが可能です。

#### 3. VLSMの仕組みとCIDRとの違い

よく似た言葉に「CIDR（サイダー）」がありますが、視点が少し違います。

* **CIDR:** インターネット全体で、複数のネットワークを **「まとめる（集約する）」** ことでルーティングテーブルを小さくする技術（外向けの視点）。
* **VLSM:** 組織内部で、1つのネットワークを **「さらに細かく、異なるサイズで分ける」** 技術（内向けの視点）。

実際にはどちらも「サブネットマスク（/24など）」を使って境界線を自由に決めるという点では、同じ仕組みを利用しています。

#### 4. VLSMのメリット

* **IPアドレスの節約:** IPv4アドレスは枯渇しているため、1つも無駄にしない設計が求められます。
* **柔軟な設計:** 部署の人数に合わせて、最適なネットワークサイズを提供できます。
* **階層構造の維持:** ネットワークを階層的に管理できるため、後にルート集約（経路の簡略化）がしやすくなります。




