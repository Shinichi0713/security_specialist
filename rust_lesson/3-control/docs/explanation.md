Rustにはいくつかの繰り返し構文がありますが、`for`文と `loop`文はそれぞれ**「目的」と「制御の仕組み」**が大きく異なります。

一言で言うと、 **「回数が決まっている・中身を順番に取り出すなら `for`」** 、**「条件が満たされるまで無限に繰り返すなら `loop`」**という使い分けになります。

---

## 🔄 `for` 文と `loop` 文の比較

### 1. `for` 文：イテレータを巡回する

`for` 文は、範囲（Range）や配列、ベクトルなどの「集まり」から要素を一つずつ取り出して処理するために使われます。

**Rust**

```
fn main() {
    // 1から5の直前まで（1, 2, 3, 4）を繰り返す
    for i in 1..5 {
        println!("値は: {}", i);
    }

    let fruits = vec!["apple", "banana", "cherry"];
    // ベクトルの要素を順番に取り出す
    for fruit in fruits {
        println!("食べ物: {}", fruit);
    }
}
```

* **特徴:** 終わりのタイミングが明確。
* **メリット:** 配列の範囲外アクセス（インデックスエラー）が起きず、安全かつ効率的です。

### 2. `loop` 文：単純な無限ループ

`loop` は条件なしで、明示的に `break` するまで永遠に繰り返します。

**Rust**

```
fn main() {
    let mut count = 0;

    loop {
        count += 1;
        println!("カウント: {}", count);

        if count == 3 {
            println!("3に達したので終了します");
            break; // ここでループを抜ける
        }
    }
}
```

* **特徴:** 終了条件をループの中で自由に制御できる。
* **メリット:** Rustのコンパイラは `loop` が無限に続く（または `break` する）ことを理解するため、後述する「値を返す」機能が安定して使えます。

---

## 🛠 決定的な違い

| **機能**     | **for 文**           | **loop 文**        |
| ------------------ | -------------------------- | ------------------------ |
| **主な用途** | コレクションや範囲の巡回   | 無限ループ、リトライ処理 |
| **終了条件** | 全要素の処理が終わったとき | `break`を実行したとき  |
| **値を返す** | できない                   | **できる**         |

### 🌟 `loop` だけができること：値を返す

`loop` は、`break` の後ろに値を置くことで、ループの結果をそのまま変数に代入できます。これは `for` や `while` にはできない強力な特徴です。

**Rust**

```
fn main() {
    let mut counter = 0;

    let result = loop {
        counter += 1;
        if counter == 10 {
            break counter * 2; // ループを抜ける時に値を返す
        }
    };

    println!("結果は: {}", result); // 20 と表示される
}
```

---

## 💡 どちらを使うべき？

1. 「〇〇回繰り返したい」「リストの全要素を処理したい」
   👉 for を使ってください。Rustで最も推奨される方法です。
2. 「特定の条件が整うまでずっと待ちたい（例：サーバーの待機、リトライ）」
   👉 loop を使ってください。
3. 「ループを抜けた結果を計算して変数に入れたい」
   👉 loop を使ってください。

ちなみに、Rustにはもう一つ `while` 文（条件が真の間繰り返す）がありますが、`loop { if !condition { break } ... }` と書くのとほぼ同じです。

次は、`for` 文を使って「1から100までの合計を計算する」コードを書いてみませんか？あるいは `break` の応用について詳しく説明しましょうか？
